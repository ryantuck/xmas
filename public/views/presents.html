<!-- Presents View -->

<div>

  <!-- Main Body -->
  <div class="row" ng-show="userLoaded()">

    <!-- Add Present Form -->
    <div class="col-lg-4">
      <h3>Add a Present</h3>
      <p>Your present will be added to the bottom of the list.</p>
      <hr>

      <!-- Form -->
      <form role="form" name="presentForm" ng-submit="addPresentFromForm()" novalidate>

        <!-- title -->
        <div class="form-group">
          <label for="newPresentTitle">Title</label>
          <input type="text" name="title" id="newPresentTitle" ng-model="newPresentTitle" class="form-control" placeholder="a new toy!" required>
        </div>

        <!-- notes -->
        <div class="form-group">
          <label for="newPresentNotes">Notes</label>
          <textarea type="text" name="notes" id="newPresentNotes" ng-model="newPresentNotes" class="form-control" placeholder="this is the coolest toy i've ever seen!"></textarea>
        </div>

        <!-- link -->
        <div class="form-group">
          <label for="newPresentLink">Link</label>
          <input type="url" name="link" id="newPresentLink" ng-model="newPresentLink" class="form-control" placeholder="www.amazon.com/...">
        </div>
        <button type="submit" class="btn btn-primary btn-block" ng-disabled="presentForm.$invalid">
          Add to List! <i class="fa fa-plus"></i>
        </button>

      </form>

      <hr>

      <!-- Finished Check -->
      <h3>Finished?</h3>
      <p>Once your list is ready, finalize it by sending it out to friends and family!</p>
      <button class="btn btn-success btn-block" data-toggle="modal" data-target="#myModal">Finalize <i class="fa fa-check"></i></button>

    </div>

    <!-- List Column -->
    <div class="col-lg-8">

      <h3>My List | {{totalPresents()}}</h3>
      <p>Drag presents to reorder. Feel free to edit and delete.</p>
      <hr>

      <!-- List of presents! -->
      <ul id="working-present-list" ui-sortable="sortableOptions" ng-model="presents" class="list-group">

        <!-- specific present -->
        <li class="list-group-item" ng-repeat="present in presents">
          <div class="row">

            <!-- Index -->
            <div class="col-lg-1">
              <h1 style="color:#c30">{{$index + 1}}</h1>
            </div>

            <!-- Details -->
            <div class="col-lg-9">
              <div ng-hide="editing == $index">
                <h3>{{present.title}}</h3>
                <p>{{present.notes}}</p>
                <div ng-show="present.link">
                <a href="{{present.link}}" target="_blank">link <i class="fa fa-external-link"></i></a>
                </div>
              </div>


              <!-- Editing Version -->
              <div ng-show="editing == $index">
                <form name="inlineForm" novalidate>
                  <div class="form-group">

                    <label>Title</label>
                    <input type="text" name="inlineTitle" class="form-control" ng-model="tmpPresent.title" placeholder="what it's called" ng-required />
                  </div>
                  <div class="form-group">
                    <label>Notes</label>
                    <textarea type="text" name="inlineNotes" class="form-control" ng-model="tmpPresent.notes" placeholder="i want this thing"></textarea>
                  </div>
                  <div class="form-group">
                    <label>Link</label>
                    <input type="url" name="inlineLink" class="form-control" ng-model="tmpPresent.link" placeholder="www.ebay.com/..." />
                  </div>
                </form>
              </div>
            </div>

            <!-- buttons -->
            <div class="col-lg-2">

              <!-- default -->
              <div ng-hide="editing == $index">
                <div class="btn-toolbar pull-right">

                  <!-- edit -->
                  <div class="btn-group">
                  <button class="close" ng-click="openEditDialog($index)">
                    <i class="fa fa-edit"></i>
                  </button>
                  </div>


                  <!-- delete -->
                  <div class="btn-group">
                  <button class="close" ng-click="deletePresent($index)">
                    <i class="fa fa-close"  ></i>
                  </button>
                  </div>

                </div>
              </div>

              <!-- editing -->
              <div ng-show="editing == $index">
                <div class="btn-toolbar pull-right">

                  <!-- save -->
                  <div class="btn-group">
                  <button class="close" ng-click="updatePresent($index)">
                    <i class="fa fa-check" style="color:green"></i>
                  </button>
                  </div>

                  <!-- discard -->
                  <div class="btn-group">
                  <button class="close" ng-click="clearEditing()">                    
                    <i class="fa fa-close" style="color:red"></i>
                  </button>
                  </div>

                </div>
              </div>
            </div>
          </div>


        </li>
      </ul>

    </div>
  </div>

    <!-- Modal -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel">Finalize List</h4>
        </div>
        <div class="modal-body">
          <p>Santa's made his list and checked it twice. Now it's your turn. </p>
          <p>Be sure to sort, add links, and anything else before submitting. You won't be able to edit your list once you finalize and share it!</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" ng-click="finalizeUser()">Save changes <span class="glyphicon glyphicon-ok"></span></button>
        </div>
      </div>
    </div>
  </div>


</div>
